(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2047:function(t,e,n){Promise.resolve().then(n.bind(n,585))},7138:function(t,e,n){"use strict";n.d(e,{default:function(){return o.a}});var r=n(231),o=n.n(r)},6463:function(t,e,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})},585:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return l}});var r=n(7437),o=n(2265),a=n(7138),i=n(6463),s=n(5686),c=n(1180);function l(){let t=(0,i.useRouter)(),[e,n]=(0,o.useState)(""),[l,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)([]),[f,x]=(0,o.useState)("pending"),[b,g]=(0,o.useState)(""),[w,y]=(0,o.useState)(1),[j,v]=(0,o.useState)(1),[S,N]=(0,o.useState)(""),[k,E]=(0,o.useState)(""),[T,P]=(0,o.useState)({}),C=(0,o.useCallback)(async t=>{h(!0),E("");try{let e=await (0,c.dd)(t,{status:f,q:b,page:w,limit:10});p(e.items),v(e.totalPages)}catch(t){E("Unable to load tutor applications.")}finally{h(!1)}},[w,b,f]);async function U(t,n){N(""),E("");try{await (0,c.TO)(e,t,{status:n,adminNotes:T[t]||""}),N("Application updated successfully."),await C(e)}catch(t){E("Unable to update application status.")}}return(0,o.useEffect)(()=>{let e=(0,s.v0)();if(!e||"admin"!==e.user.role){t.replace("/blog/admin/auth");return}u(!0),n(e.accessToken),C(e.accessToken)},[C,t]),(0,o.useEffect)(()=>{e&&C(e)},[e,w,b,f,C]),l?(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-black pt-24",children:(0,r.jsxs)("section",{className:"mx-auto max-w-7xl px-6 pb-16",children:[(0,r.jsxs)("div",{className:"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white sm:text-3xl",children:"Tutor Applications"}),(0,r.jsxs)("div",{className:"grid w-full grid-cols-2 gap-2 sm:flex sm:w-auto sm:gap-2",children:[(0,r.jsx)(a.default,{href:"/blog/admin/posts",className:"rounded-full border border-white/25 px-4 py-2 text-center text-sm font-semibold text-white transition hover:bg-white/10",children:"Back to Posts"}),(0,r.jsx)("button",{type:"button",onClick:function(){(0,s.DH)(),t.replace("/blog/admin/auth")},className:"rounded-full border border-rose-400/35 px-4 py-2 text-sm font-semibold text-rose-200 transition hover:bg-rose-500/10",children:"Logout"})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsxs)("div",{className:"mb-3 grid gap-2 sm:flex sm:items-center sm:justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white sm:text-xl",children:"Applications"}),(0,r.jsxs)("div",{className:"grid w-full grid-cols-1 gap-2 sm:flex sm:w-auto sm:gap-2",children:[(0,r.jsxs)("select",{value:f,onChange:t=>{y(1),x(t.target.value)},className:"rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-sm text-white outline-none",children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,r.jsx)("option",{value:"shortlisted",children:"Shortlisted"}),(0,r.jsx)("option",{value:"hired",children:"Hired"}),(0,r.jsx)("option",{value:"rejected",children:"Rejected"})]}),(0,r.jsx)("input",{value:b,onChange:t=>{y(1),g(t.target.value)},placeholder:"Search by name, email, city...",className:"w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-sm text-white outline-none sm:w-64"})]})]}),d?(0,r.jsx)("p",{className:"text-sm text-gray-300",children:"Loading..."}):0===m.length?(0,r.jsx)("p",{className:"text-sm text-gray-300",children:"No tutor applications found."}):(0,r.jsx)("div",{className:"space-y-3",children:m.map(t=>{var e,n;return(0,r.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/20 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:t.fullName}),(0,r.jsx)("span",{className:"text-xs uppercase text-gray-300",children:t.status})]}),(0,r.jsxs)("div",{className:"mt-2 grid gap-1 text-xs text-gray-300 sm:grid-cols-2",children:[(0,r.jsxs)("p",{children:["Email: ",t.email]}),(0,r.jsxs)("p",{children:["Phone: ",t.phone]}),(0,r.jsxs)("p",{children:["City: ",t.city]}),(0,r.jsxs)("p",{children:["Mode: ",t.teachingMode]}),(0,r.jsxs)("p",{children:["Subjects: ",t.subjects]}),(0,r.jsxs)("p",{children:["Experience: ",t.experience]}),(0,r.jsxs)("p",{children:["Availability: ",t.availability]}),(0,r.jsxs)("p",{children:["Applied: ",function(t){let e=new Date(t);return Number.isNaN(e.getTime())?"-":e.toLocaleDateString("en-PK",{year:"numeric",month:"short",day:"numeric"})}(t.createdAt)]})]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-gray-200",children:t.coverMessage}),(0,r.jsx)("textarea",{value:null!==(n=null!==(e=T[t.id])&&void 0!==e?e:t.adminNotes)&&void 0!==n?n:"",onChange:e=>P(n=>({...n,[t.id]:e.target.value})),placeholder:"Admin notes (optional)",rows:2,className:"mt-3 w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-xs text-white outline-none"}),(0,r.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 sm:flex sm:flex-wrap",children:[t.resumeUrl&&(0,r.jsx)("a",{href:t.resumeUrl,target:"_blank",rel:"noopener noreferrer",className:"rounded-full border border-white/25 px-3 py-1 text-center text-xs font-semibold text-white",children:"View Resume"}),(0,r.jsx)("button",{type:"button",onClick:()=>void U(t.id,"reviewed"),className:"rounded-full bg-blue-500/20 px-3 py-1 text-xs font-semibold text-blue-200",children:"Reviewed"}),(0,r.jsx)("button",{type:"button",onClick:()=>void U(t.id,"shortlisted"),className:"rounded-full bg-emerald-500/20 px-3 py-1 text-xs font-semibold text-emerald-200",children:"Shortlist"}),(0,r.jsx)("button",{type:"button",onClick:()=>void U(t.id,"hired"),className:"rounded-full bg-indigo-500/20 px-3 py-1 text-xs font-semibold text-indigo-200",children:"Hire"}),(0,r.jsx)("button",{type:"button",onClick:()=>void U(t.id,"rejected"),className:"rounded-full bg-rose-500/20 px-3 py-1 text-xs font-semibold text-rose-200",children:"Reject"})]})]},t.id)})}),!d&&j>1&&(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>y(t=>Math.max(1,t-1)),disabled:w<=1,className:"rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white transition hover:bg-white/10 disabled:opacity-40",children:"Previous"}),(0,r.jsxs)("span",{className:"rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-gray-200",children:["Page ",w," of ",j]}),(0,r.jsx)("button",{type:"button",onClick:()=>y(t=>Math.min(j,t+1)),disabled:w>=j,className:"rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white transition hover:bg-white/10 disabled:opacity-40",children:"Next"})]})]}),k&&(0,r.jsx)("p",{className:"mt-4 rounded-lg bg-rose-500/15 px-4 py-3 text-sm text-rose-200",children:k}),S&&(0,r.jsx)("p",{className:"mt-4 rounded-lg bg-emerald-500/15 px-4 py-3 text-sm text-emerald-200",children:S})]})}):(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-black pt-24",children:(0,r.jsx)("section",{className:"mx-auto max-w-3xl px-6 pb-16",children:(0,r.jsx)("div",{className:"mt-6 rounded-2xl border border-amber-400/30 bg-amber-500/10 p-5 text-amber-100",children:(0,r.jsx)("p",{className:"text-sm",children:"Checking admin access..."})})})})}},1180:function(t,e,n){"use strict";var r;n.d(e,{BC:function(){return k},Cw:function(){return p},Dj:function(){return f},JQ:function(){return a},Mk:function(){return N},OW:function(){return c},QP:function(){return E},T:function(){return u},T6:function(){return i},TO:function(){return w},Uw:function(){return S},X2:function(){return d},dd:function(){return g},h9:function(){return x},jk:function(){return v},jw:function(){return h},lL:function(){return l},nf:function(){return m},rX:function(){return s},s9:function(){return b},uE:function(){return y},w6:function(){return j}});let o=null!==(r="http://localhost:5000".replace(/\/$/,""))&&void 0!==r?r:"http://localhost:5000";function a(){return o}async function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"no-store",a=new URLSearchParams({page:String(t),limit:String(e)});n.trim()&&a.set("q",n.trim());let i=await fetch("".concat(o,"/posts?").concat(a.toString()),{method:"GET",cache:r});if(!i.ok)throw Error("Unable to fetch posts");let s=await i.json();return Array.isArray(s)?{items:s,total:s.length,page:1,limit:e,totalPages:1}:s}async function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=await fetch("".concat(o,"/posts/admin/all?limit=").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!n.ok)throw Error("Unable to fetch admin posts");return await n.json()}async function c(t,e){let n=await fetch("".concat(o,"/posts/admin/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!n.ok)throw Error("Unable to fetch post");return await n.json()}async function l(t,e){let n=new FormData;n.append("file",e);let r=await fetch("".concat(o,"/posts/admin/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:n});if(!r.ok)throw Error("Image upload failed");let a=await r.json();if(!a.url)throw Error("No image URL returned from server");return a.url}async function u(t,e){let n=new FormData;n.append("file",e);let r=await fetch("".concat(o,"/student-articles/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:n});if(!r.ok)throw Error("Image upload failed");let a=await r.json();if(!a.url)throw Error("No image URL returned from server");return a.url}async function d(t){let{token:e,...n}=t,r=await fetch("".concat(o,"/student-articles"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(n)});if(!r.ok){var a;throw Error(null!==(a=(await r.json()).message)&&void 0!==a?a:"Article submission failed")}return r.json()}async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new URLSearchParams({page:String(t),limit:String(e)});n.trim()&&r.set("q",n.trim());let a=await fetch("".concat(o,"/student-articles?").concat(r.toString()),{method:"GET",cache:"no-store"});if(!a.ok)throw Error("Unable to fetch student articles");return await a.json()}async function m(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;n.status&&r.set("status",n.status),n.page&&r.set("page",String(n.page)),n.limit&&r.set("limit",String(n.limit)),(null===(e=n.q)||void 0===e?void 0:e.trim())&&r.set("q",n.q.trim());let a=await fetch("".concat(o,"/student-articles/admin/all?").concat(r.toString()),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!a.ok)throw Error("Unable to fetch student articles");return await a.json()}async function p(t,e,n){let r=await fetch("".concat(o,"/student-articles/admin/").concat(e,"/approve"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(null!=n?n:{})});if(!r.ok)throw Error("Unable to approve article");return r.json()}async function f(t,e){let n=await fetch("".concat(o,"/student-articles/admin/").concat(e,"/reject"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw Error("Unable to reject article");return n.json()}async function x(t){let e=new FormData;e.append("file",t);let n=await fetch("".concat(o,"/tutor-applications/upload-resume"),{method:"POST",body:e});if(!n.ok)throw Error("Resume upload failed");let r=await n.json();if(!r.url)throw Error("No resume URL returned from server");return r.url}async function b(t){let e=await fetch("".concat(o,"/tutor-applications"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){var n;throw Error(null!==(n=(await e.json()).message)&&void 0!==n?n:"Tutor application failed")}return e.json()}async function g(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;n.status&&r.set("status",n.status),n.page&&r.set("page",String(n.page)),n.limit&&r.set("limit",String(n.limit)),(null===(e=n.q)||void 0===e?void 0:e.trim())&&r.set("q",n.q.trim());let a=await fetch("".concat(o,"/tutor-applications/admin/all?").concat(r.toString()),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!a.ok)throw Error("Unable to fetch tutor applications");return await a.json()}async function w(t,e,n){let r=await fetch("".concat(o,"/tutor-applications/admin/").concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw Error("Unable to update tutor application");return r.json()}async function y(t){let e=await fetch("".concat(o,"/subscribers/email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){var n;throw Error(null!==(n=(await e.json()).message)&&void 0!==n?n:"Subscriber signup failed")}return e.json()}async function j(){let t=await fetch("".concat(o,"/subscribers/push-public-key"),{method:"GET",cache:"no-store"});if(!t.ok)throw Error("Unable to fetch push public key");return t.json()}async function v(t){let e=await fetch("".concat(o,"/subscribers/push"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){var n;throw Error(null!==(n=(await e.json()).message)&&void 0!==n?n:"Push subscription failed")}return e.json()}async function S(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;n.page&&r.set("page",String(n.page)),n.limit&&r.set("limit",String(n.limit)),(null===(e=n.q)||void 0===e?void 0:e.trim())&&r.set("q",n.q.trim());let a=await fetch("".concat(o,"/subscribers/admin/email?").concat(r.toString()),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!a.ok)throw Error("Unable to fetch subscribers");return a.json()}async function N(t,e,n){let r=await fetch("".concat(o,"/subscribers/admin/email/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({isActive:n})});if(!r.ok)throw Error("Unable to update subscriber");return r.json()}async function k(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=new URLSearchParams({page:String(e),limit:String(n)}),a=await fetch("".concat(o,"/comments/post/").concat(encodeURIComponent(t),"?").concat(r.toString()),{method:"GET",cache:"no-store"});if(!a.ok)throw Error("Unable to fetch comments");return a.json()}async function E(t,e,n){let r=await fetch("".concat(o,"/comments/post/").concat(encodeURIComponent(e)),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({content:n})});if(!r.ok){var a;throw Error(null!==(a=(await r.json()).message)&&void 0!==a?a:"Unable to post comment")}return r.json()}},5686:function(t,e,n){"use strict";n.d(e,{DH:function(){return s},Gi:function(){return o},J1:function(){return a},v0:function(){return i}});let r="blog_admin_auth",o="blog-auth-changed";function a(t){localStorage.setItem(r,JSON.stringify(t)),window.dispatchEvent(new Event(o))}function i(){let t=localStorage.getItem(r);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}function s(){localStorage.removeItem(r),window.dispatchEvent(new Event(o))}}},function(t){t.O(0,[231,971,23,744],function(){return t(t.s=2047)}),_N_E=t.O()}]);