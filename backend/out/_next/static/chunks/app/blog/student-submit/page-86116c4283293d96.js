(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{4088:function(t,e,n){Promise.resolve().then(n.bind(n,1911))},7138:function(t,e,n){"use strict";n.d(e,{default:function(){return a.a}});var r=n(231),a=n.n(r)},6463:function(t,e,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})},1911:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var r=n(7437),a=n(2265),o=n(7138),i=n(6463),s=n(1180),c=n(5686);let l={studentName:"",title:"",article:"",imageUrl:"",notesPdfUrl:""};function u(){let t=(0,i.useRouter)(),[e,n]=(0,a.useState)(l),[u,d]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)(""),[w,x]=(0,a.useState)(""),[y,v]=(0,a.useState)("url");function j(t,e){n(n=>({...n,[t]:e}))}async function S(t){if(t&&u){m(!0),x("");try{let e=await (0,s.T)(u,t);j("imageUrl",e),b("Image uploaded successfully.")}catch(t){x(t instanceof Error?t.message:"Image upload failed")}finally{m(!1)}}}async function N(t){t.preventDefault(),p(!0),x(""),b("");try{let t={token:u,studentName:e.studentName,title:e.title,article:e.article,imageUrl:e.imageUrl||void 0,notesPdfUrl:e.notesPdfUrl||void 0},r=await (0,s.X2)(t);b(r.message||"Article submitted for admin review."),n(l)}catch(t){x(t instanceof Error?t.message:"Submission failed")}finally{p(!1)}}return(0,a.useEffect)(()=>{let e=(0,c.v0)();if(!e){t.replace("/blog/admin/auth");return}d(e.accessToken),j("studentName",e.user.name||e.user.email.split("@")[0])},[t]),(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-black pt-24",children:(0,r.jsxs)("section",{className:"mx-auto max-w-4xl px-6 pb-16",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Submit Student Article"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"Share your article with your name. Admin will review and publish approved submissions."}),(0,r.jsxs)("form",{onSubmit:N,className:"mt-6 space-y-4 rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,r.jsxs)("label",{className:"block text-sm text-gray-200",children:["Student Name",(0,r.jsx)("input",{value:e.studentName,onChange:t=>j("studentName",t.target.value),required:!0,disabled:!0,className:"mt-1 w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-white outline-none"})]}),(0,r.jsxs)("label",{className:"block text-sm text-gray-200",children:["Article Title",(0,r.jsx)("input",{value:e.title,onChange:t=>j("title",t.target.value),required:!0,className:"mt-1 w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-white outline-none"})]}),(0,r.jsxs)("label",{className:"block text-sm text-gray-200",children:["Article Content",(0,r.jsx)("textarea",{value:e.article,onChange:t=>j("article",t.target.value),required:!0,minLength:20,rows:10,className:"mt-1 w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-white outline-none"})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-white/10 p-3",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:"Article Image"}),(0,r.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>v("url"),className:"rounded-full px-3 py-1 text-xs font-semibold ".concat("url"===y?"bg-emerald-500 text-black":"border border-white/30 text-white"),children:"By URL"}),(0,r.jsx)("button",{type:"button",onClick:()=>v("upload"),className:"rounded-full px-3 py-1 text-xs font-semibold ".concat("upload"===y?"bg-emerald-500 text-black":"border border-white/30 text-white"),children:"Upload"})]}),"url"===y?(0,r.jsx)("input",{value:e.imageUrl,onChange:t=>j("imageUrl",t.target.value),placeholder:"https://...",className:"mt-3 w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-white outline-none"}):(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:t=>{var e,n;S(null!==(n=null===(e=t.target.files)||void 0===e?void 0:e[0])&&void 0!==n?n:null)},className:"w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-white"}),h&&(0,r.jsx)("p",{className:"mt-2 text-xs text-gray-300",children:"Uploading image..."})]})]}),(0,r.jsxs)("label",{className:"block text-sm text-gray-200",children:["Notes PDF URL (optional)",(0,r.jsx)("input",{value:e.notesPdfUrl,onChange:t=>j("notesPdfUrl",t.target.value),placeholder:"https://.../notes.pdf",className:"mt-1 w-full rounded-lg border border-white/20 bg-black/40 px-3 py-2 text-white outline-none"})]}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"w-full rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-black transition hover:bg-emerald-400 disabled:opacity-60",children:f?"Submitting...":"Submit for Review"})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(o.default,{href:"/blog",className:"text-sm font-semibold text-emerald-300 hover:text-emerald-200",children:"Back to Blog"})}),w&&(0,r.jsx)("p",{className:"mt-4 rounded-lg bg-rose-500/15 px-4 py-3 text-sm text-rose-200",children:w}),g&&(0,r.jsx)("p",{className:"mt-4 rounded-lg bg-emerald-500/15 px-4 py-3 text-sm text-emerald-200",children:g})]})})}},1180:function(t,e,n){"use strict";var r;n.d(e,{BC:function(){return k},Cw:function(){return f},Dj:function(){return p},JQ:function(){return o},Mk:function(){return N},OW:function(){return c},QP:function(){return E},T:function(){return u},T6:function(){return i},TO:function(){return x},Uw:function(){return S},X2:function(){return d},dd:function(){return w},h9:function(){return g},jk:function(){return j},jw:function(){return h},lL:function(){return l},nf:function(){return m},rX:function(){return s},s9:function(){return b},uE:function(){return y},w6:function(){return v}});let a=null!==(r="http://localhost:5000".replace(/\/$/,""))&&void 0!==r?r:"http://localhost:5000";function o(){return a}async function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"no-store",o=new URLSearchParams({page:String(t),limit:String(e)});n.trim()&&o.set("q",n.trim());let i=await fetch("".concat(a,"/posts?").concat(o.toString()),{method:"GET",cache:r});if(!i.ok)throw Error("Unable to fetch posts");let s=await i.json();return Array.isArray(s)?{items:s,total:s.length,page:1,limit:e,totalPages:1}:s}async function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=await fetch("".concat(a,"/posts/admin/all?limit=").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!n.ok)throw Error("Unable to fetch admin posts");return await n.json()}async function c(t,e){let n=await fetch("".concat(a,"/posts/admin/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!n.ok)throw Error("Unable to fetch post");return await n.json()}async function l(t,e){let n=new FormData;n.append("file",e);let r=await fetch("".concat(a,"/posts/admin/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:n});if(!r.ok)throw Error("Image upload failed");let o=await r.json();if(!o.url)throw Error("No image URL returned from server");return o.url}async function u(t,e){let n=new FormData;n.append("file",e);let r=await fetch("".concat(a,"/student-articles/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:n});if(!r.ok)throw Error("Image upload failed");let o=await r.json();if(!o.url)throw Error("No image URL returned from server");return o.url}async function d(t){let{token:e,...n}=t,r=await fetch("".concat(a,"/student-articles"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(n)});if(!r.ok){var o;throw Error(null!==(o=(await r.json()).message)&&void 0!==o?o:"Article submission failed")}return r.json()}async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new URLSearchParams({page:String(t),limit:String(e)});n.trim()&&r.set("q",n.trim());let o=await fetch("".concat(a,"/student-articles?").concat(r.toString()),{method:"GET",cache:"no-store"});if(!o.ok)throw Error("Unable to fetch student articles");return await o.json()}async function m(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;n.status&&r.set("status",n.status),n.page&&r.set("page",String(n.page)),n.limit&&r.set("limit",String(n.limit)),(null===(e=n.q)||void 0===e?void 0:e.trim())&&r.set("q",n.q.trim());let o=await fetch("".concat(a,"/student-articles/admin/all?").concat(r.toString()),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!o.ok)throw Error("Unable to fetch student articles");return await o.json()}async function f(t,e,n){let r=await fetch("".concat(a,"/student-articles/admin/").concat(e,"/approve"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(null!=n?n:{})});if(!r.ok)throw Error("Unable to approve article");return r.json()}async function p(t,e){let n=await fetch("".concat(a,"/student-articles/admin/").concat(e,"/reject"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw Error("Unable to reject article");return n.json()}async function g(t){let e=new FormData;e.append("file",t);let n=await fetch("".concat(a,"/tutor-applications/upload-resume"),{method:"POST",body:e});if(!n.ok)throw Error("Resume upload failed");let r=await n.json();if(!r.url)throw Error("No resume URL returned from server");return r.url}async function b(t){let e=await fetch("".concat(a,"/tutor-applications"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){var n;throw Error(null!==(n=(await e.json()).message)&&void 0!==n?n:"Tutor application failed")}return e.json()}async function w(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;n.status&&r.set("status",n.status),n.page&&r.set("page",String(n.page)),n.limit&&r.set("limit",String(n.limit)),(null===(e=n.q)||void 0===e?void 0:e.trim())&&r.set("q",n.q.trim());let o=await fetch("".concat(a,"/tutor-applications/admin/all?").concat(r.toString()),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!o.ok)throw Error("Unable to fetch tutor applications");return await o.json()}async function x(t,e,n){let r=await fetch("".concat(a,"/tutor-applications/admin/").concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw Error("Unable to update tutor application");return r.json()}async function y(t){let e=await fetch("".concat(a,"/subscribers/email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){var n;throw Error(null!==(n=(await e.json()).message)&&void 0!==n?n:"Subscriber signup failed")}return e.json()}async function v(){let t=await fetch("".concat(a,"/subscribers/push-public-key"),{method:"GET",cache:"no-store"});if(!t.ok)throw Error("Unable to fetch push public key");return t.json()}async function j(t){let e=await fetch("".concat(a,"/subscribers/push"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){var n;throw Error(null!==(n=(await e.json()).message)&&void 0!==n?n:"Push subscription failed")}return e.json()}async function S(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;n.page&&r.set("page",String(n.page)),n.limit&&r.set("limit",String(n.limit)),(null===(e=n.q)||void 0===e?void 0:e.trim())&&r.set("q",n.q.trim());let o=await fetch("".concat(a,"/subscribers/admin/email?").concat(r.toString()),{method:"GET",headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(!o.ok)throw Error("Unable to fetch subscribers");return o.json()}async function N(t,e,n){let r=await fetch("".concat(a,"/subscribers/admin/email/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({isActive:n})});if(!r.ok)throw Error("Unable to update subscriber");return r.json()}async function k(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=new URLSearchParams({page:String(e),limit:String(n)}),o=await fetch("".concat(a,"/comments/post/").concat(encodeURIComponent(t),"?").concat(r.toString()),{method:"GET",cache:"no-store"});if(!o.ok)throw Error("Unable to fetch comments");return o.json()}async function E(t,e,n){let r=await fetch("".concat(a,"/comments/post/").concat(encodeURIComponent(e)),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({content:n})});if(!r.ok){var o;throw Error(null!==(o=(await r.json()).message)&&void 0!==o?o:"Unable to post comment")}return r.json()}},5686:function(t,e,n){"use strict";n.d(e,{DH:function(){return s},Gi:function(){return a},J1:function(){return o},v0:function(){return i}});let r="blog_admin_auth",a="blog-auth-changed";function o(t){localStorage.setItem(r,JSON.stringify(t)),window.dispatchEvent(new Event(a))}function i(){let t=localStorage.getItem(r);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}function s(){localStorage.removeItem(r),window.dispatchEvent(new Event(a))}}},function(t){t.O(0,[231,971,23,744],function(){return t(t.s=4088)}),_N_E=t.O()}]);